<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{{ animal.name }} â€” Animal Shelter</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-5">
    <div class="row">
      <div class="col-md-6">
        {% if animal.photo %}
          <img src="{{ animal.photo.url }}" class="img-fluid rounded" alt="{{ animal.name }}" style="height:100%; object-fit:cover;">
        {% else %}
          <div class="bg-secondary text-white d-flex align-items-center justify-content-center" style="height:400px;">
            No photo
          </div>
        {% endif %}
      </div>
      <div class="col-md-6">
        <h2>{{ animal.name }}</h2>
        <p><strong>Species:</strong> {{ animal.species|capfirst }}</p>
        <p><strong>Age:</strong> {{ animal.age|default:"Unknown" }}</p>
        <p>{{ animal.description }}</p>

        {% if user.is_authenticated %}
          {% if not animal.adopted %}
            <form method="POST">
              {% csrf_token %}
              <label for="message">Tell us why you want to adopt this animal:</label>
              <textarea name="message" id="message" rows="4" class="form-control mb-3" placeholder="I would love to adopt {{ animal.name }} because..." required></textarea>
              <button type="submit" class="btn btn-success">Submit request</button>
              <a href="{% url 'pets:animal_list' %}" class="btn btn-secondary">Cancel</a>
            </form>
          {% else %}
            <p class="text-muted mt-3">This animal has already been adopted.</p>
            <a href="{% url 'pets:animal_list' %}" class="btn btn-secondary mt-2">Back to list</a>
          {% endif %}
        {% else %}
          <p class="mt-3">
            <a href="{% url 'pets:login' %}?next={{ request.path }}" class="btn btn-outline-primary">Log in to adopt</a>
            or
            <a href="{% url 'pets:register' %}" class="btn btn-outline-secondary">Register</a>
          </p>
        {% endif %}
      </div>
    </div>
  </div>
</body>
</html>
