{% extends "pets/base.html" %}
{% load static %}

{% block title %}Available Animals â€” Animal Shelter{% endblock %}

{% block content %}
<div class="page-header">
  <div class="container">
    <h2>Available Animals</h2>
    <p class="mb-0">Find your perfect companion among our sheltered friends.</p>
  </div>
</div>

<div class="container my-5">
  <div class="row mb-5">
    <div class="col-12 text-center">
      <div class="btn-group shadow-sm">
        <a href="{% url 'pets:animal_list' %}"
          class="btn px-4 {% if not animal_type %}btn-primary{% else %}btn-outline-primary{% endif %}">All</a>
        <a href="{% url 'pets:animal_list' %}?type=cat"
          class="btn px-4 {% if animal_type == 'cat' %}btn-primary{% else %}btn-outline-primary{% endif %}">Cats</a>
        <a href="{% url 'pets:animal_list' %}?type=dog"
          class="btn px-4 {% if animal_type == 'dog' %}btn-primary{% else %}btn-outline-primary{% endif %}">Dogs</a>
      </div>
    </div>
  </div>

  <div class="row g-4">
    {% if animals %}
    {% for animal in animals %}
    <div class="col-md-6 col-lg-4">
      <div class="card card-mature h-100">
        <div class="animal-photo-container">
          {% if animal.photo %}
          <img src="{{ animal.photo.url }}" alt="{{ animal.name }}">
          {% else %}
          <div class="text-muted">No photo available</div>
          {% endif %}
        </div>
        <div class="card-body p-4">
          <div class="d-flex justify-content-between align-items-start mb-2">
            <h3 class="h4 mb-0">{{ animal.name }}</h3>
            <span class="badge bg-light text-dark border">{{ animal.species|capfirst }}</span>
          </div>
          <p class="text-muted small mb-3">
            Age:
            {% if animal.age == 0 %}
            Less than a year
            {% elif animal.age %}
            {{ animal.age }} year{{ animal.age|pluralize }}
            {% else %}
            Unknown
            {% endif %}
          </p>
          <p class="card-text text-secondary">{{ animal.description|truncatewords:15 }}</p>
          <a href="{% url 'pets:animal_detail' animal.pk %}" class="btn btn-primary w-100 mt-3">Learn More</a>
        </div>
      </div>
    </div>
    {% endfor %}
    {% else %}
    <div class="col-12 text-center py-5">
      <p class="lead text-muted">No animals available at the moment. Please check back soon!</p>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}